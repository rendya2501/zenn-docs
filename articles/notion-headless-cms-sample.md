---
title: "Notionãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSæ§‹ç¯‰æ–¹æ³•"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["csharp","Notion","GitHubActions"]
published: false
---

## ã¯ã˜ã‚ã«

1. Notionã®å‹‰å¼·ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãã®æ—¥ã®å­¦ç¿’è¨˜éŒ²ã‚’ã¤ã‘ã‚‹  
2. GitHubActionsã§Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã€ãã®è¨˜äº‹ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’ç”Ÿæˆã—ã€å‹‰å¼·ç”¨ãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹  

è¨˜äº‹ã‚’Notionã«ã¾ã¨ã‚ã¦ã€ãã®æ´»å‹•è¨˜éŒ²ã‚’githubã®è‰ã¨ã—ã¦è‡ªå‹•çš„ã«åæ˜ ã•ã›ãŸã„ã€‚  

å®Œå…¨ã«ã“ã¡ã‚‰ã®è¨˜äº‹[(çµå±€Githubã«å­¦ç¿’å±¥æ­´ã‚’çµ±ä¸€ã—ãŸæ–¹ãŒè«¸ã€…è‰¯ã‹ã£ãŸ)](https://zenn.dev/bun913/articles/study-history-on-github)ã®é€šã‚Šãªã®ã§ã€ãã®ã¾ã¾å¼•ç”¨ã•ã›ã¦é ‚ãã¾ã™ã€‚  

>ç§ã¯ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å¤§äº‹ã«ã—ãŸã„ã¨æ€ã„ã¤ã¤ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ãªæ‚©ã¿ã‚’æŒã£ã¦ãŠã‚Šã¾ã—ãŸã€‚
>
>- æ¯æ—¥ä½•ã‹ã—ã‚‰ã®å­¦ç¿’ã‚’ã—ã¦ã„ã‚‹ã®ã§ã€æ¯æ—¥å­¦ç¿’å±¥æ­´ã‚’æ®‹ã—ãŸã„
>- ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŸã‚‹ã‚‚ã®ã€ã©ã†ã›ãªã‚‰Github ã«è‰ã‚’ç”Ÿã‚„ã—ãŸã„
>- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç³»ã®å­¦ç¿’ã¯ã—ã¦ã„ãªãã¦ã‚‚ã€èª­æ›¸ã—ãŸã‚Šè³‡æ ¼ã®å­¦ç¿’ã‚’ã—ã¦ã„ã‚‹æ—¥ãŒã‚ã‚‹ãŒã€Github ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã ã‘è¦‹ã‚‹ã¨ä½•ã‚‚ã—ã¦ã„ãªã„ã‚ˆã†ã«è¦‹ãˆã‚‹
>- ã¾ãŸè³‡æ ¼å­¦ç¿’ã®ãŸã‚ã«å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã£ã¦å‹‰å¼·ã—ã¦ã„ã‚‹ã‘ã©åŒã˜ãä½•ã‚‚å‹‰å¼·ã—ã¦ã„ãªã„ã‚ˆã†ã«è¦‹ãˆã‚‹

<!-- 
å­¦ç¿’è¨˜éŒ²ã¯Notionã«ã¾ã¨ã‚ãŸã„ã‘ã©ã€ãã®æ´»å‹•ã‚’githubã«åæ˜ ã•ã›ã¦è‰ã‚’ç”Ÿã‚„ã—ãŸã‹ã£ãŸã€ã¨ã„ã†ã®ãŒç›®çš„ã§ã™ã€‚
-->

## æ¦‚è¦

æœ¬è¨˜äº‹ã§ã¯ã€Notion ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è¨˜äº‹ç®¡ç†ã®ä¸­å¿ƒã«æ®ãˆã€GitHub Actions ã‚’æ´»ç”¨ã—ã¦ Notion ã®å†…å®¹ã‚’ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ã§å‡ºåŠ›ã— GitHub ãƒªãƒã‚¸ãƒˆãƒªã«åŒæœŸã•ã›ã‚‹æ©Ÿèƒ½ã®å®Ÿç¾æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚  

ã“ã®æ–¹æ³•ã‚’ä½¿ã†ã“ã¨ã§ã€Notion ä¸Šã§è¨˜äº‹ã‚’ä½œæˆãƒ»ç·¨é›†ã™ã‚‹ã ã‘ã§ã€è‡ªå‹•çš„ã« GitHub ã«åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚  

## ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMS

ã“ã®ã‚ˆã†ãªã‚·ã‚¹ãƒ†ãƒ ã‚’ `ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMS` ã¨è¨€ã†ã‚‰ã—ã„ã§ã™ã€‚  
å…ˆäººãŸã¡ãŒãã®ã‚ˆã†ã«å‘¼ç§°ã—ã¦ã„ãŸã®ã§ã€è‡ªåˆ†ã‚‚åŒã˜ã‚ˆã†ã«ä½¿ã‚ã›ã¦è²°ã„ã¾ã™ã€‚  
[Notionãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSåŒ–è¨˜éŒ² (3) GitHub Actionsã¨è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ | lacolaco's marginalia](https://blog.lacolaco.net/posts/notion-headless-cms-3/)  
[Notionã§ãƒ–ãƒ­ã‚°ã‚’æ›¸ã | Yucchiy's Note](https://blog.yucchiy.com/2022/05/blogging-with-notion/)  

**ã€Œãã‚‚ãã‚‚ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨ã¯ä½•ãã‚„ï¼Ÿã€** ã¨ã„ã†ã“ã¨ã§ã€AIã®å›ç­”ã‚’ãã®ã¾ã¾å¼•ç”¨ã—ã¦ãŠãã¾ã™ã€‚  
>ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSï¼ˆHeadless CMSï¼‰ã¨ã¯ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç®¡ç†ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰ã¨è¡¨ç¤ºï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã‚’åˆ†é›¢ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ã“ã¨ã§ã™ã€‚é€šå¸¸ã®CMSï¼ˆä¾‹ãˆã° WordPress ãªã©ï¼‰ã¯ã€ç®¡ç†ç”»é¢ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆãƒ»ç·¨é›†ã—ã€åŒã˜ã‚·ã‚¹ãƒ†ãƒ å†…ã§ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¨ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚ä¸€æ–¹ã€ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã®ã¿ã‚’æ‹…å½“ã—ã€APIã‚’é€šã˜ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¤–éƒ¨ã®Webã‚µã‚¤ãƒˆã‚„ã‚¢ãƒ—ãƒªã«æä¾›ã—ã¾ã™ã€‚

WordPressã¨ã‹ä½¿ã£ãŸã“ã¨ãªã„ã®ã§ã€Œããƒ¼ãªã‚“ã ã€ã£ã¦æ„Ÿã˜ã§ã™ã€‚  

## ãªãœã“ã®è¨˜äº‹ã‚’æ›¸ã„ãŸã®ã‹ï¼Ÿ  

Notionã‚’ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨ã—ã¦é‹ç”¨ã•ã›ã‚‹è¨˜äº‹ã¯ã‚ã‚Œã©ã€å…·ä½“çš„ãªæ§‹ç¯‰æ–¹æ³•ã¾ã§è§£èª¬ã—ã¦ãã‚Œã¦ã„ã‚‹ã‚µã‚¤ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚(è‡ªåˆ†ãŒç„¡çŸ¥ãªã ã‘ã§ã€åˆ†ã‹ã‚‹äººãŒè¦‹ãŸã‚‰ãã‚Œã§ååˆ†ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“)  
å‚è€ƒã‚µã‚¤ãƒˆã‚„AIã‚’é§†ä½¿ã—ãŸçµæœã€ãªã‚“ã¨ã‹å®Ÿç¾ã™ã‚‹äº‹ãŒå‡ºæ¥ãŸã®ã§ã€è‡ªåˆ†ã®ã‚ˆã†ã«ä½•ã®çŸ¥è­˜ã‚‚ãªã„äººã®å‚è€ƒã«ãªã‚Œã°ã¨æ€ã£ã¦æ›¸ãã¾ã—ãŸã€‚  
(æŠ€è¡“è¨˜äº‹ã®ãƒã‚¿ã«ã‚‚ãªã‚‹ã—â€¦)  

ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ã«ã‚ãŸã‚Šã€ç­†è€…ã¯GitHubActionsã®çŸ¥è­˜ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚  
ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹äº‹ã¯å‡ºæ¥ã¾ã—ãŸãŒã€æ‹™ã„éƒ¨åˆ†ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã®ã§ã€ãã“ã¯ã”äº†æ‰¿ãã ã•ã„ã€‚  
ã¾ãŸã€ä¸€ç•ªå¾—æ„ãªè¨€èªãŒC#ã ã£ãŸã®ã§ã€C#ä¸­å¿ƒã®èª¿æŸ»ã‚’ã—ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚  
ä¼¼ãŸã‚ˆã†ãªå¢ƒé‡ã®æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚  

## ãƒ‡ãƒ¢

**ãã‚‚ãã‚‚ã©ã‚“ãªã‚·ã‚¹ãƒ†ãƒ ãªã®ï¼Ÿ**ã¨ã„ã†ã“ã¨ã‚’è¦‹ã¦ã‚‚ã‚‰ã£ãŸæ–¹ãŒæ—©ã„ã¨æ€ã„ã¾ã™ã€‚  

ã¾ãšNotionã«ã“ã‚“ãªæ„Ÿã˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã—ã¦ã€  

![alt text](../images/notion-headless-cms-sample/notion-database.png)

ã“ã‚“ãªæ„Ÿã˜ã®è¨˜äº‹ã‚’æ›¸ã„ãŸã¨ã—ã¾ã™ã€‚  

![alt text](../images/notion-headless-cms-sample/notion-article1.png)
![alt text](../images/notion-headless-cms-sample/notion-article2.png)

GitHubActionsã‚’å®Ÿè¡Œã—ã¾ã—ã¦ã€

![alt text](../images/notion-headless-cms-sample/github-actions-demo.png)

ãã‚ŒãŒæˆåŠŸã™ã‚‹ã¨Notionã®è¨˜äº‹ãŒãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã¨ã—ã¦ç”Ÿæˆã•ã‚Œã€GitHubã«è‰ãŒç”Ÿãˆã¾ã™ã€‚  

![alt text](../images/notion-headless-cms-sample/github-article-demo.png)

## é–‹ç™ºç’°å¢ƒ  

- Win11 HOME 24H2  
- .Net8  
- VSCode  

## å®Ÿè£…ãƒ»è§£èª¬

ä»¥ä¸‹ã®æ‰‹é †ã§å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚  

1. Notionã®è¨­å®š  
   1. Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ&ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¨­å®š  
   2. NotionAPIåˆ©ç”¨ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—
   3. Notion Database ID ã®å–å¾—
2. GitHubãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®š
   1. ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
   2. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«ç™»éŒ²
   3. ãƒªãƒã‚¸ãƒˆãƒªã®permissionsã®è¨­å®š
3. C#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ  
4. GitHubActionsã®è¨­å®š  

### 1. Notionã®è¨­å®š

#### 1-1. Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ&ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¨­å®š

ã¾ãšã¯Notionã§è¨˜äº‹ç®¡ç†ç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚  
ãƒ•ãƒ«ãƒšãƒ¼ã‚¸ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦é©å½“ã«åå‰ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚  
â€»è‡ªåˆ†ã®å ´åˆã¯ã€ã¨ã‚Šã‚ãˆãš`notion-headless-cms-sample-database`ã¨ã¤ã‘ã¦ãŠãã¾ã—ãŸã€‚  

æ¬¡ã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã—ã¦ã„ãã¾ã™ã€‚  
ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚  
GitHubé€£æºã®éš›ã«å¿…ãšå¿…è¦ã¨ãªã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã™ã€‚  

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ç¨®é¡ | ç”¨é€” |
|---|---|---|
| **Title** | ã‚¿ã‚¤ãƒˆãƒ« | è¨˜äº‹æœ¬ä½“ã®ã‚¿ã‚¤ãƒˆãƒ«åã§ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ã«å«ã‚ã¾ã™ã€‚ |
| **Slug** | ãƒ†ã‚­ã‚¹ãƒˆ | GitHubã§è¨˜äº‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã«ãªã‚Šã¾ã™ã€‚æŒ‡å®šã—ãªã„å ´åˆã¯ã‚¿ã‚¤ãƒˆãƒ«ãŒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¨ãªã‚Šã¾ã™ã€‚ |
| **PublishedAt** | ä½œæˆæ—¥æ™‚ | è¨˜äº‹ã‚’ä½œæˆã—ãŸæ—¥æ™‚ã§ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ã«å«ã‚ã¾ã™ã€‚ |
| **Type** | ã‚»ãƒ¬ã‚¯ãƒˆ | Zennã®ã‚ˆã†ã«è¨˜äº‹ãŒ`Idea`ã‹`Tech`ãªã®ã‹ã‚’ç¤ºã—ã¾ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ã«å«ã‚ã¾ã™ã€‚ |
| **Tags** | ãƒãƒ«ãƒã‚»ãƒ¬ã‚¯ãƒˆ | æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ç­‰ã‚’é¸æŠã™ã‚‹ã‚‚ã®ã§ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ã«å«ã‚ã¾ã™ã€‚ |
| **RequestPublishing** | ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | è¨˜äº‹å…¬é–‹ãƒ•ãƒ©ã‚°ã§ã™ã€‚ã“ã‚Œã«ãƒã‚§ãƒƒã‚¯ãŒã¤ã„ã¦ã„ã‚‹è¨˜äº‹ãŒå…¬é–‹ã®å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚ |

![alt text](../images/notion-headless-cms-sample/notion-database.png)
![alt text](../images/notion-headless-cms-sample/notion-article1.png)

#### 1-2. NotionAPIåˆ©ç”¨ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—

ã“ã¡ã‚‰ã®è¨˜äº‹([Notion APIã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³](https://programming-zero.net/notion-api-setting/))ã‚’å‚è€ƒã«`ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³`ãªã‚‹ã‚‚ã®ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚  
`GitHubActions` ã® `Seacrets` ã§ä½¿ã†ã®ã§ãƒ¡ãƒ¢ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚  

#### 1-3. Notion Database ID ã®å–å¾—

åŒã˜ãã“ã¡ã‚‰ã®è¨˜äº‹([ã€Notionã€‘ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã‚’ç¢ºèªã—ã‚ˆã†ï½œã‚ã¾ã¦ãƒ](https://note.com/amatyrain/n/nb9ebe31dfab7))ã‚’å‚è€ƒã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚  

ç°¡å˜ãªã®ã§ãã®ã¾ã¾å¼•ç”¨ã•ã›ã¦é ‚ãã¾ã™ã€‚  
>â‘¢URLã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã‚’ç¢ºèª
>
>URLã¯ã€Œ`https://www.notion.so/XXXXXXXX?v=YYYYYYYY`ã€ã¨ã„ã£ãŸå½¢å¼ã¨ãªã£ã¦ã„ã¾ã™ãŒã€ãã®ã€Œ`XXXXXXXX`ã€ã®éƒ¨åˆ†ãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã¨ãªã‚Šã¾ã™  

ã“ã¡ã‚‰ã‚‚ `GitHubActions` ã® `Seacrets` ã§ä½¿ã†ã®ã§ãƒ¡ãƒ¢ã—ã¦ãŠã„ã¦ãã ã•ã„ã€‚  

### 2. GitHubãƒªãƒã‚¸ãƒˆãƒªã®è¨­å®š  

#### 2-1. ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

ãƒªãƒã‚¸ãƒˆãƒªåã¯ä½•ã§ã‚‚è‰¯ã„ã§ã™ãŒã€ç‰¹ã«ã“ã ã‚ã‚ŠãŒç„¡ã‘ã‚Œã°`notion-headless-cms-sample`ã¨ã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚  

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚  

``` txt
notion-headless-cms-sample/
  â”œâ”€â”€ .github/
  â”‚   â”œâ”€â”€ src/
  â”‚   â”‚   â”œâ”€â”€ Program.cs
  â”‚   â”‚   â”œâ”€â”€ GithubActionsTest.csproj
  â”‚   â”‚   â””â”€â”€ .gitignore
  â”‚   â””â”€â”€ workflows/
  â”‚       â””â”€â”€ workflow.yml
  â””â”€â”€ articles/
      â””â”€â”€ yyyy/
          â”œâ”€â”€ mm/
          â”‚   â”œâ”€â”€ Hoge.md
          â”‚   â””â”€â”€ Fuga.md
          â””â”€â”€ mm/
              â””â”€â”€ Piyo.md
```

#### 2-2. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«ç™»éŒ²

ã“ã¡ã‚‰ã®è¨˜äº‹([GitHub Actions ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæƒ…å ±ã¨å¤‰æ•°ã®è¨­å®šæ–¹æ³• #GitHubActions - Qiita](https://qiita.com/mkin/items/75a4928a1fafe5eacd17))ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã®ã§ã€å‚è€ƒã«ã—ãªãŒã‚‰è¨­å®šã—ã¦ãã ã•ã„ã€‚  

- `ãƒªãƒã‚¸ãƒˆãƒªã®Settingsã‚¿ãƒ–`
- `Secrets and variablesã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å†…ã®Actions`  
- `New repository secretãƒœã‚¿ãƒ³` ã‚’æŠ¼ä¸‹  

Notionã®è¨­å®šæ™‚ã«ãƒ¡ãƒ¢ã—ã¦ãŠã„ãŸå€¤ã‚’æ ¼ç´ã—ã¦ãã ã•ã„ã€‚  

| å¤‰æ•°å | æ ¼ç´ã™ã‚‹å€¤ |
|---|---|
| **NOTION_AUTH_TOKEN** | 1-2. ã§å–å¾—ã—ãŸ **Notion APIã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³** |
| **NOTION_DATABASE_ID** | 1-3. ã§å–å¾—ã—ãŸ **Notion Database ID** |
| **USER_EMAIL** | githubã«ç™»éŒ²ã—ã¦ã„ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| **USER_NAME** | githubã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å |

ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼åã«é–¢ã—ã¦ã¯GitHubActionsã‚’å®Ÿè¡Œã—ãŸæ™‚ã«è‰ã‚’ç”Ÿã‚„ã™ãŸã‚ã«å¿…è¦ã§ã™ã€‚  

#### 2-3. ãƒªãƒã‚¸ãƒˆãƒªã®permissionsã®è¨­å®š

æ¬¡ã«ãƒªãƒã‚¸ãƒˆãƒªã®`Workflow permissions`ã‚’è¨­å®šã—ã¾ã™ã€‚  

- `ãƒªãƒã‚¸ãƒˆãƒªã®Settingsã‚¿ãƒ–`  
- `Actionsã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å†…ã®General`  
- `Workflow permissions`  

ã“ã‚Œã‚’ `Read and Write permissions` ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

åˆæœŸçŠ¶æ…‹ã¯ `Read repository contents and packages permissions` ã¨ãªã£ã¦ã„ã¾ã™ãŒã€ã“ã®çŠ¶æ…‹ã§GitHubActionsã‚’å®Ÿè¡Œã™ã‚‹ã¨æ¬¡ã®ç”»åƒã®ã‚ˆã†ã«403ã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚  

![alt text](../images/notion-headless-cms-sample/github-actions-permission-error.png)

- **Read and Write permissions(èª­ã¿å–ã‚Šã¨æ›¸ãè¾¼ã¿ã®æ¨©é™)**  
ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ã¯ã€ã™ã¹ã¦ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«å¯¾ã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã¸ã®èª­ã¿å–ã‚Šã¨æ›¸ãè¾¼ã¿ã®æ¨©é™ãŒã‚ã‚Šã¾ã™ã€‚  
- **Read repository contents and packages permissions(ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª­ã¿å–ã‚Šæ¨©é™)**  
ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«å¯¾ã—ã¦ã®ã¿èª­ã¿å–ã‚Šæ¨©é™ã‚’æŒã¡ã¾ã™ã€‚  

### 3. C#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ  

GitHubActionsã«ã¦å®Ÿè¡Œã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€[(yucchiy/notion-to-markdown)](https://github.com/yucchiy/notion-to-markdown)æ§˜ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’å…ƒã«åŠ ç­†ä¿®æ­£ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚  
ã“ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã‹ã‚‰å®Ÿç¾å‡ºæ¥ãŸã¨ã„ã£ã¦ã‚‚éè¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  

<!-- `Program.cs` ã«è¨˜è¿°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã®æ¦‚è¦ã‚’è§£èª¬ã—ãªãŒã‚‰æ›¸ãï¼ˆä¾‹ï¼‰   -->

### 4. GitHubActionsã®è¨­å®š  

GitHub Actionsã‚’ä½¿ã„ã€å®šæœŸçš„ã«Notionã‹ã‚‰Markdownã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚  
ä»¥ä¸‹ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆ`.github/workflows/workflow.yaml`ï¼‰  

```yml
name: Notion to Markdown Workflow

on:
  workflow_dispatch:
  schedule:
    - cron: '30 14 * * *' # 23:30 JST

jobs:
  import_markdown:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up .NET
        uses: actions/setup-dotnet@v4
        with:
          dotnet-version: '8.0'

      - name: Restore dependencies
        run: dotnet restore .github/src/notion-to-markdown.csproj

      - name: Build
        run: dotnet build .github/src/notion-to-markdown.csproj --configuration Release --no-restore

      - name: Publish
        run: dotnet publish .github/src/notion-to-markdown.csproj --configuration Release --output ./out --no-build

      - name: Run Notion to Markdown
        run: |
          dotnet ./out/notion-to-markdown.dll \
            ${{ secrets.NOTION_AUTH_TOKEN }} \
            ${{ secrets.NOTION_DATABASE_ID }} \
            "articles/{{publish|date.to_string('%Y/%m')}}/{{slug}}"

      - name: Check for changes
        if: env.EXPORTED_COUNT == '0'
        run: exit 0

      - name: Commit exported markdown files
        run: |
          git config --global user.email "${{ secrets.USER_EMAIL }}"
          git config --global user.name "${{ secrets.USER_NAME }}"
          git add articles/
          git commit -m "Import files from notion database" || exit 0
          git push
```

## å‚è€ƒãƒ»ãƒªãƒ³ã‚¯

[Notionã§ãƒ–ãƒ­ã‚°ã‚’æ›¸ã | Yucchiy's Note](https://blog.yucchiy.com/2022/05/blogging-with-notion/)  
[C#ã§Custom GitHub Actionã‚’æ›¸ã | Yucchiy's Note](https://blog.yucchiy.com/2022/05/implement-custom-github-action-with-csharp/)  

[Notionãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSåŒ–è¨˜éŒ² (3) GitHub Actionsã¨è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ | lacolaco's marginalia](https://blog.lacolaco.net/posts/notion-headless-cms-3/)

[çµå±€Githubã«å­¦ç¿’å±¥æ­´ã‚’çµ±ä¸€ã—ãŸæ–¹ãŒè«¸ã€…è‰¯ã‹ã£ãŸ](https://zenn.dev/bun913/articles/study-history-on-github)  

## ãƒªãƒã‚¸ãƒˆãƒª

ã“ã®è¨˜äº‹ã§ä½œæˆã—ãŸæˆæœç‰©ã‚’ç½®ã„ã¦ã„ã¾ã™ã€‚  
å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚  

[rendya2501/notion-headless-cms-sample: Notion ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMS ã‚µãƒ³ãƒ—ãƒ«](https://github.com/rendya2501/notion-headless-cms-sample)  

<!--
## ãƒ¡ãƒ¢

Notion ã‚’ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMS ã¨ã—ã¦æ´»ç”¨ã—ã€è¨˜äº‹ã‚’ GitHub ã«è‡ªå‹•ã§åæ˜ ã•ã›ã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚  

![1000006240](https://github.com/user-attachments/assets/0309ead8-d6db-4ae4-846f-ce9bf8193e0d)

## ãã‚‚ãã‚‚Notionã‚’ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨ã—ã¦ä½¿ã†ã¨ã¯ï¼Ÿ  

æ™®é€šã®CMSï¼ˆWordPressãªã©ï¼‰ã¨é•ã„ã€Notionã‚’ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨ã—ã¦ä½¿ã†å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªä»•çµ„ã¿ã«ãªã‚Šã¾ã™ã€‚  

1. Notionã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜äº‹ã‚’ä½œæˆ  
2. APIã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—  
3. å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’Markdownã«å¤‰æ›  
4. GitHub Actionsã§å®šæœŸçš„ã«å–å¾—ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤  

ã“ã®æµã‚Œã‚’å®Ÿç¾ã™ã‚‹ã¨ã€**Notionã§è¨˜äº‹ã‚’ç®¡ç†ã—ãªãŒã‚‰ã€è‡ªå‹•çš„ã«GitHubã«Markdownã¨ã—ã¦ä¿å­˜ã™ã‚‹** ã“ã¨ãŒã§ãã¾ã™ã€‚  


- **Notion**ï¼ˆè¨˜äº‹ã‚’ç®¡ç†ã™ã‚‹CMSä»£ã‚ã‚Šï¼‰  
- **Notion API**ï¼ˆNotionã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ï¼‰  
- **GitHub & GitHub Actions**ï¼ˆè¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’Markdownã«å¤‰æ›ã—ç®¡ç†ã™ã‚‹ï¼‰  
- **C#**ï¼ˆAPIã¨é€£æºã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆï¼‰   


## ã¾ã¨ã‚  

- Notionã‚’ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨ã—ã¦æ´»ç”¨ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆ  
- å®Ÿè£…ã®æµã‚Œã‚’ãŠã•ã‚‰ã„  
- ä»Šå¾Œã®æ”¹å–„ç‚¹ã‚„ç™ºå±•çš„ãªä½¿ã„æ–¹  

### ğŸ¯ ã“ã‚“ãªäººã«å½¹ç«‹ã¤è¨˜äº‹  

- **Notionã‚’CMSã¨ã—ã¦ä½¿ã„ãŸã„ãŒã€æ§‹ç¯‰æ–¹æ³•ãŒåˆ†ã‹ã‚‰ãªã„äºº**  
- **GitHub Actionsã§Notionã®è¨˜äº‹ã‚’è‡ªå‹•ç®¡ç†ã—ãŸã„äºº**  
- **å®Ÿéš›ã«å‹•ãã‚µãƒ³ãƒ—ãƒ«ã‚’è©¦ã—ã¦ã¿ãŸã„äºº**  

-->